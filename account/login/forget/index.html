<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<link rel="stylesheet" type="text/css" href="media/css/style.css">
		<link rel="icon" href="media/photo/favicon-light.ico" type="image/x-icon">
		<title>继续-登录</title>
	</head>
<!---->
	<body>
<!--		<nav></nav>-->
		<div style="padding-bottom: 100px"></div>
<!--		<div style="padding-right: 50px;padding-bottom: 90px;display: inline-block"></div>-->
		<div align="center">
			<div class="divblock movingDiv">
				<div align="left" style="padding: 20px">
					<b>
						<a href="#" class="abt" id="returnLink">⬅返回</a>
						<script>
							// 解析 URL 中的查询参数
							const urlParams = new URLSearchParams(window.location.search);
							const from = urlParams.get('from');
							// 设置返回链接的 href 属性为来源页面的地址，如果没有来源信息，则默认返回到当前页面
							document.getElementById('returnLink').href = from ? from : document.referrer;
						</script>
					</b>
				</div>
				<div class="bodyblock movingDiv" id="c1">
					<div><h2>Step 1</h2></div>
					<form id="loginbs">
						<div align="center">
							<a style="padding-right: 8px"></a>
							<label for="emailInput">邮箱</label>
							<a style="padding-right: 8px"></a>
							<input type="email" class="inpbox" id="emailInput" name="email" placeholder="Enter your email" required>
						</div>
						<div style="padding-top: 15px"></div>
						<div><input type="button" value="下一步" class="btn" id="triggerBtn"></div>
					</form>
					<script>
    const c1 = document.getElementById('c1');
    const triggerBtn = document.getElementById('triggerBtn');
    const emailInput = document.getElementById('emailInput');
    let isTriggered = false; // 添加触发条件

    // 检查邮箱格式是否有效
    function isValidEmail(email) {
        // 使用正则表达式进行邮箱格式验证
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }

    // 触发动作
    function triggerAction() {
        // 检查 email 输入框是否存在且有意义的值
        if (emailInput && isValidEmail(emailInput.value.trim())) {
            if (!isTriggered) {
                // 移动 div 到新的位置
                c1.style.transform = 'translateX(-99999px) translateY(0px)';
                
                // 设置透明度为0，实现缓慢消失
                c1.style.opacity = '0';
                
                isTriggered = true; // 设置触发状态为已触发
            }
        } else {
            alert('请填写有效的邮箱地址！');
        }
    }

    // 当按钮点击时触发动作
    triggerBtn.addEventListener('click', triggerAction);
</script>
<!--
					<script>
							document.getElementById("loginbs").addEventListener("submit", function(event) {
							var username = document.getElementById("username").value;
							var password = document.getElementById("password").value;
  
							if (username === "" || password === "") {
								//alert("Please fill in all fields.");
								//event.preventDefault(); // 阻止表单提交
							} else {
								// 在这里可以进行进一步的验证或提交表单
								//alert("Username and password are filled.");
							}
							});
					</script>
-->
				</div>
			</div>
		</div>
	</body>
</html>
